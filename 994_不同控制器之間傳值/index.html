<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
</head>

<body ng-app="myApp">

    <div style="border: 2px solid blue;" ng-controller="firstController">
        <button ng-click="doClick()">Click(++)</button>
        <p>{{commonData}}</p>
    </div>
    <hr>
    <div style="border: 2px solid black;" ng-controller="secondController">
        <button ng-click="doClick()">Click(--)</button>
        <p>{{commonData}}</p>
    </div>

    <script type="text/javascript" src="assest/js/angularJS/v1.5.7/angular.js"></script>
    <script>
        let myApp = angular.module('myApp', [ /*須要由ngModule注入的模組*/ ]);
        
        myApp.service('globalService', function () {
            this.sharedData = [1, 2, 3, 4, 5]; // 要在Controller中共用的資料(透過Service傳遞)

            this.getCommonArray = function () {
                return this.sharedData;
            }
        })

        myApp.controller('firstController', ['$scope', 'globalService', function ($myScope, globalService) {
            $myScope.commonData = globalService.getCommonArray();
            $myScope.doClick = function () {
                console.log('firstController, $myScope.commonData >>>', $myScope.commonData);
                let myArray = $myScope.commonData;
                myArray.forEach(function (elemt/*當前的元素*/, index/*索引*/, theArray/*傳入的陣列物件*/) {
                    theArray[index] += 1;
                });
            }
        }]);

        myApp.controller('secondController', ['$scope', 'globalService', function ($myScope, globalService) {
            $myScope.commonData = globalService.getCommonArray();
            $myScope.doClick = function () {
                console.log('secondController, $myScope.commonData >>>', $myScope.commonData);
                let myArray = $myScope.commonData;
                myArray.forEach(function (elemt/*當前的元素*/, index/*索引*/, theArray/*傳入的陣列物件*/) {
                    theArray[index] -= 1;
                });
            }
        }]);

    </script>
</body>

</html>